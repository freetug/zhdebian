Linux下使用xargs优雅的kill掉全部相关线程
芝士味的椒盐
于 2022-02-16 15:17:29 发布 9681
收藏 146
分类专栏： Linux模块 文章标签： linux 运维 服务器 shell 线程
版权
华为云开发者联盟 该内容已被华为云开发者联盟社区收录
加入社区
Linux模块 专栏收录该内容
27 篇文章 2 订阅
订阅专栏

在这里插入图片描述

    👨🏻‍🎓博主介绍：大家好，我是芝士味的椒盐，一名在校大学生，热爱分享知识，很高兴在这里认识大家🌟
    🌈擅长领域：Java、大数据、运维、电子
    🙏🏻如果本文章各位小伙伴们有帮助的话，🍭关注+👍🏻点赞+🗣评论+📦收藏，相应的有空了我也会回访，互助！！！
    🤝另本人水平有限，旨在创作简单易懂的文章，在文章描述时如有错，恳请各位大佬指正，在此感谢！！！

文章目录

                缘由
                什么是xargs
                什么是awk
                xargs的小案例
                awk的小案例
                xargs优雅kill掉全部相关线程

缘由

      不知道相信都有这样的体验吧，比如你启动了一个程序或者一个指令，而这个指令会在后台有多条线程，等了半天都没有响应，这时候你很恼火，想kill掉这个任务，但是有很多个线程一个个的杀死，就非常的鸡肋，一次还好，多几次谁受得了啊。

在这里插入图片描述

      给大家举个例子，你想要community idea的源码，这时候要是用git去小猫猫上clone下来，你会发现半天没响应…

在这里插入图片描述

      这时候你就不想clone，就想取消掉，也就是kill，你用ps查看了一下，有三条线程，于是你就会使用kill -9 PID一个个杀，这三个线程其实还算少，有的可能有十几个线程，那岂不得烦死，所以你xargs就是必要的。

在这里插入图片描述
什么是xargs

    不用官方的话，大白话来说，就是可以将管道｜的参数的数据转换成命令行参数，就是相当于一个过滤器，组合多个命令的一个小工具。

什么是awk

    作为linux三剑客之一， 是一种处理文本文件的语言，是一个强大的文本分析工具。

xargs的小案例

    echo 打印文件名使用xargs传递给cat作为命令行参数读取文件
    在这里插入图片描述
        注意echo文件并不能直接现实文件的内容的

awk的小案例

    使用awk读取ps指令出来的第一行第一个PID
    在这里插入图片描述
        使用｜管道将ps的内容传输给第一个awk 'NR==1’表示取第一行，然后将取出的结果给awk 'NF=1’这时候表示取第一列，所以就是输出PID

xargs优雅kill掉全部相关线程

    这里需要使用管道陪和awk以及kill

    这里以kill掉github相关线程为目标

    没有kill前的ps -a线程状态
    在这里插入图片描述

    指令

    ps -a | grep github | awk 'NF=1' | xargs kill -9
        1

    在这里插入图片描述

    再次查看是否还有github线程，已经没有了
    在这里插入图片描述


