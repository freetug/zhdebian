Linux下使用xargs优雅的kill掉全部相关线程

                什么是xargs
                什么是awk
                xargs的小案例
                awk的小案例
                xargs优雅kill掉全部相关线程

缘由

      不知道相信都有这样的体验吧，比如你启动了一个程序或者一个指令，而这个指令会在后台有多条线程，等了半天都没有响应，这时候你很恼火，想kill掉这个任务，但是有很多个线程一个个的杀死，就非常的鸡肋，一次还好，多几次谁受得了啊。

在这里插入图片描述

      给大家举个例子，你想要community idea的源码，这时候要是用git去小猫猫上clone下来，你会发现半天没响应…

在这里插入图片描述

      这时候你就不想clone，就想取消掉，也就是kill，你用ps查看了一下，有三条线程，于是你就会使用kill -9 PID一个个杀，这三个线程其实还算少，有的可能有十几个线程，那岂不得烦死，所以你xargs就是必要的。

在这里插入图片描述
什么是xargs

    不用官方的话，大白话来说，就是可以将管道｜的参数的数据转换成命令行参数，就是相当于一个过滤器，组合多个命令的一个小工具。

什么是awk

    作为linux三剑客之一， 是一种处理文本文件的语言，是一个强大的文本分析工具。

xargs的小案例

    echo 打印文件名使用xargs传递给cat作为命令行参数读取文件
    在这里插入图片描述
        注意echo文件并不能直接现实文件的内容的

awk的小案例

    使用awk读取ps指令出来的第一行第一个PID
    在这里插入图片描述
        使用｜管道将ps的内容传输给第一个awk 'NR==1’表示取第一行，然后将取出的结果给awk 'NF=1’这时候表示取第一列，所以就是输出PID

xargs优雅kill掉全部相关线程

    这里需要使用管道陪和awk以及kill

    这里以kill掉github相关线程为目标

    没有kill前的ps -a线程状态
    在这里插入图片描述

    指令

    ps -a | grep github | awk 'NF=1' | xargs kill -9
    再次查看是否还有github线程，已经没有了


ps -a | grep firefox | cut -c 1-8 | xargs kill -9
===================================================================

Linux下批量终止（kill）多个进程
千与千与千
于 2020-07-17 16:44:21 发布 5076
收藏 17
分类专栏： Problem Be Solved 文章标签： linux
版权
Problem Be Solved 专栏收录该内容
77 篇文章 8 订阅
订阅专栏
命令：

ps -ef|grep "关键字"|grep -v "关键字"|cut -c 9-15|xargs kill -9

解释：
1、显示所有进程

ps -ef

例子：

2、筛选进程

 显示含有“关键字”的进程，这里的关键字的位置可以是任意位置，只要是存在在这个进程中的属性

grep "关键字"

例子：

grep bash

 
3、筛选进程

 去掉含有“关键字”的进程，这里的关键字的位置可以是任意位置，只要是存在在这个进程中的属性

grep -v "关键字"

例子：

grep -v bin

4、截取进程号

截取筛选出的进程号，位置为第9-15个字符

cut -c 9-15

例子：

5、终止进程：

 xargs为前面选择出的进程号，作为“kill -9”的参数，“kill -9”会终止指定的进程

xargs kill -9

说明

2和3的筛选进程不一定都要写，自己视情况选择就好。






==========================================================================

批量关闭linux进程

你是否经常遇到需要批量杀死很多进程的情况？而你是否还在一个一个的kill。

接下来我教你一个小秘诀吧。

1、首先我们查看当前的进程列表。

我们以查看nginx进程为例，通过ps -ef显示当前机器运行的所有进程，再通过grep nginx过滤出包含nginx字符串的进程。完成命令为ps -ef|grep nginx。

2、获取进程ID
采用awk工具提取进程ID。awk是一种很棒的语言，适合文本处理和报表生成。在这里我们通过awk处理第一步中得到的进程列表，提取进程ID。完成命令为ps -ef|grep nginx|awk '{print $2}'

3、批量kill
xargs 是一条 Unix 和类 Unix 操作系统的常用命令；它的作用是将参数列表转换成小块分段传递给其他命令，以避免参数列表过长的问题。接下来将使用xargs把第二步中得到的进程ID列表传递给kill命令。完成命令为ps -ef|grep nginx|awk '{print $2}'|xargs kill -9。

OK。大功告成，现在可以批量kill进程了。
==========================================================================
